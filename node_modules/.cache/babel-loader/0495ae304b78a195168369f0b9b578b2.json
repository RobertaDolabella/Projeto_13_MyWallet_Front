{"ast":null,"code":"var _jsxFileName = \"/home/roberta/\\xC1rea de Trabalho/Project13_mywallet/src/components/GerarTransacoes.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport styled from \"styled-components\";\nimport UserContext from \"../UserContext\";\nimport { useContext } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function GerarTransacoes(_ref) {\n  _s();\n\n  let {\n    setLista\n  } = _ref;\n  const userLocalSerializada = localStorage.getItem(\"user\");\n  const userLocal = JSON.parse(userLocalSerializada);\n  const [listaTransacoes, setListaTransacoes] = useState([]);\n  const [itemDeletado, setItemDeletado] = useState();\n  const [saldo, setSaldo] = useState();\n  const {\n    controle,\n    setControle\n  } = useContext(UserContext);\n  const {\n    token\n  } = userLocal;\n  const autorizacao = {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  };\n  const URLAPI = 'https://my-wallet-projeto-13-driven.herokuapp.com/mywallet';\n  useEffect(() => {\n    const promiseGet = axios.get(URLAPI, autorizacao);\n    promiseGet.then(response => gerarLista(response));\n    promiseGet.catch(response => alert(`Código do erro${response.error}`));\n  }, [controle]);\n\n  function gerarLista(response) {\n    setListaTransacoes(response.data);\n\n    if (listaTransacoes.length === 0) {\n      setLista(true);\n    }\n\n    if (listaTransacoes.length !== 0) {\n      setLista(false);\n    }\n\n    calcularSaldo();\n  }\n\n  console.log(listaTransacoes);\n\n  function excluirTransacao(element) {\n    setItemDeletado(element.id_transacao);\n    const promiseDelete = axios.delete(`${URLAPI}/${element.id_transacao}`, autorizacao);\n    promiseDelete.then(response => gerarLista(response));\n    promiseDelete.catch(() => alert(\"Não foi possivel cancelar a sua transação :/\"));\n  }\n\n  function calcularSaldo() {\n    let aux = 0;\n    listaTransacoes.forEach(element => {\n      if (element.tipo === false) {\n        aux = element.valorNumero + aux;\n      }\n\n      if (element.tipo === true) {\n        aux = aux - element.valorNumero;\n      }\n    });\n    console.log(aux);\n    setSaldo(aux);\n    setControle(true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(ContainerTransacoes, {\n    children: [listaTransacoes.map(element => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Tempo, {\n        children: element.tempo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Descricao, {\n        children: element.descricao\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Valor, {\n        debito: element.tipo,\n        children: element.valorTexto\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => excluirTransacao(element),\n        children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n          name: \"close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(Saldo, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Saldo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: saldo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n\n_s(GerarTransacoes, \"J2JkRH+GlNZkoHkXW/NcJYi35Ks=\");\n\n_c = GerarTransacoes;\nconst ContainerTransacoes = styled.div`\n    position: relative;\n    padding:22px 24px 0px 24px;\n    width:75vw;\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n    background: #FFFFFF;\n    border-radius: 5px;\n    \n    div{\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n        align-items: center;\n    }\n    button{\n        width:4vw;\n        border: 0px;\n        background: rgba(0,0,0,0);\n    }`;\n_c2 = ContainerTransacoes;\nconst Tempo = styled.h4`\n    width: 10vw;\n    font-family: 'Raleway', sans-serif;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    color: #C6C6C6;`;\n_c3 = Tempo;\nconst Descricao = styled.h3`\n    width: 25vw;\n    margin-left:6px;\n    font-family: 'Raleway', sans-serif;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    color: #000000;`;\n_c4 = Descricao;\nconst Valor = styled.h3`\n    width: 15vw;\n    font-family: 'Raleway', sans-serif;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    text-align: right;\n    color: ${props => props.debito === true ? ` #C70000` : `#03AC00`}`;\n_c5 = Valor;\nconst Saldo = styled.div`\n    position: absolute;\n    width:75vw;\n    bottom: 0px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between; \n    font-family: 'Raleway', sans-serif;\n    font-style: normal;\n    font-weight: 700;\n    font-size: 17px;\n    line-height: 20px;\n    `;\n_c6 = Saldo;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"GerarTransacoes\");\n$RefreshReg$(_c2, \"ContainerTransacoes\");\n$RefreshReg$(_c3, \"Tempo\");\n$RefreshReg$(_c4, \"Descricao\");\n$RefreshReg$(_c5, \"Valor\");\n$RefreshReg$(_c6, \"Saldo\");","map":{"version":3,"names":["useEffect","useState","axios","styled","UserContext","useContext","GerarTransacoes","setLista","userLocalSerializada","localStorage","getItem","userLocal","JSON","parse","listaTransacoes","setListaTransacoes","itemDeletado","setItemDeletado","saldo","setSaldo","controle","setControle","token","autorizacao","headers","Authorization","URLAPI","promiseGet","get","then","response","gerarLista","catch","alert","error","data","length","calcularSaldo","console","log","excluirTransacao","element","id_transacao","promiseDelete","delete","aux","forEach","tipo","valorNumero","map","tempo","descricao","valorTexto","ContainerTransacoes","div","Tempo","h4","Descricao","h3","Valor","props","debito","Saldo"],"sources":["/home/roberta/Área de Trabalho/Project13_mywallet/src/components/GerarTransacoes.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport axios from \"axios\"\nimport styled from \"styled-components\"\nimport UserContext from \"../UserContext\"\nimport { useContext } from \"react\"\nexport function GerarTransacoes({setLista}) {\n    const userLocalSerializada = localStorage.getItem(\"user\")\n    const userLocal = JSON.parse(userLocalSerializada)\n\n    const [listaTransacoes, setListaTransacoes] = useState([])\n    const [itemDeletado, setItemDeletado] = useState()\n    const [saldo, setSaldo] = useState()\n\n\n    const { controle, setControle } = useContext(UserContext)\n\n    const { token } = userLocal\n\n    const autorizacao = {\n        headers: {\n            Authorization: `Bearer ${token}`\n        }\n    }\n\n\n    const URLAPI = 'https://my-wallet-projeto-13-driven.herokuapp.com/mywallet'\n\n    useEffect(() => {\n        const promiseGet = axios.get(URLAPI,autorizacao)\n        promiseGet.then((response) =>gerarLista(response))\n        promiseGet.catch((response) => alert(`Código do erro${response.error}`))\n    }, [controle])\nfunction gerarLista(response){\n    setListaTransacoes(response.data)\n    if(listaTransacoes.length===0){\n        setLista(true)\n    }\n    if(listaTransacoes.length!==0){\n        setLista(false)\n    }\n    calcularSaldo()\n}\nconsole.log(listaTransacoes)\n    function excluirTransacao(element) {\n\n        setItemDeletado(element.id_transacao)\n      \n        const promiseDelete = axios.delete(`${URLAPI}/${element.id_transacao}`,autorizacao)\n        promiseDelete.then((response)=>gerarLista(response))\n        promiseDelete.catch(()=>alert(\"Não foi possivel cancelar a sua transação :/\"))\n\n    }\n    function calcularSaldo(){\n        let aux= 0\n        listaTransacoes.forEach((element)=> {\n            if(element.tipo===false){\n                aux = element.valorNumero + aux\n            }\n            if(element.tipo===true){\n                aux = aux - (element.valorNumero)\n            }\n            })     \n            console.log(aux)\n            setSaldo(aux)\n            setControle(true)\n  }\n    return (\n\n        <ContainerTransacoes>\n            {listaTransacoes.map((element) =>\n                <div>\n                    <Tempo>{element.tempo}</Tempo>\n                    <Descricao>{element.descricao}</Descricao>\n                    <Valor debito={element.tipo}>{element.valorTexto}</Valor>\n                    <button onClick={()=> excluirTransacao(element)}>\n                        <ion-icon name=\"close\"></ion-icon>\n                        </button>\n                </div>\n            )}\n            <Saldo>\n                <h2>Saldo</h2>\n                <h2>{saldo}</h2>\n            </Saldo>\n        </ContainerTransacoes>\n    )\n}\n\nconst ContainerTransacoes = styled.div`\n    position: relative;\n    padding:22px 24px 0px 24px;\n    width:75vw;\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n    background: #FFFFFF;\n    border-radius: 5px;\n    \n    div{\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n        align-items: center;\n    }\n    button{\n        width:4vw;\n        border: 0px;\n        background: rgba(0,0,0,0);\n    }`\n\n    const Tempo = styled.h4`\n    width: 10vw;\n    font-family: 'Raleway', sans-serif;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    color: #C6C6C6;`\n\nconst Descricao = styled.h3`\n    width: 25vw;\n    margin-left:6px;\n    font-family: 'Raleway', sans-serif;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    color: #000000;`\n\nconst Valor = styled.h3`\n    width: 15vw;\n    font-family: 'Raleway', sans-serif;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    text-align: right;\n    color: ${(props)=>props.debito=== true? ` #C70000`: `#03AC00`}`\n\n    const Saldo = styled.div`\n    position: absolute;\n    width:75vw;\n    bottom: 0px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between; \n    font-family: 'Raleway', sans-serif;\n    font-style: normal;\n    font-weight: 700;\n    font-size: 17px;\n    line-height: 20px;\n    `\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}